{% extends "layouts/base.html" %}

{% block title %} Blank Page {% endblock %}

<!-- Specific Page CSS goes HERE  -->
{% block stylesheets %}{% endblock stylesheets %}

{% block content %}

    <main>

        {% include 'includes/preloader.html' %}

        <form name="myform" method="post" onsubmit="return callback();">
        <section class="section-header">
            <div class="container">

                <input type="text" placeholder="Digite o nÃºmero do CAR" id="car"/>
                <input type="submit" value=Pesquisar />

            </div>
               <div class="row-9">
                    <div id="map" class="chart" style="height: 800px"></div>
              </div>
        </section>
        </form>

    </main>

{% endblock content %}

<!-- Specific Page JS goes HERE  -->
{% block javascripts %}
    <script>
            async function callback() {
                let car = document.getElementById('car');
                {#let response = await fetch(`/callback/getMap?&car_id=${car.value}`);#}
                let response = await fetch(`/ui-buttons.html`);
                if (response.ok) {
                    let mapJson = await response.json();
                    if (response.ok) {
                        Plotly.react('map', JSON.parse(mapJson['Map']), {});
                    } else {
                        alert("HTTP-Error: " + response.status + "on getInfo");
                    }
                } else {
                    alert("HTTP-Error: " + response.status + "on getState");
                }
        }
    </script>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
{% endblock javascripts %}
