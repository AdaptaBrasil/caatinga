{% extends "layouts/wizard.tmpl" %}
  
{% block wizardDescription %}Informe as medidas do projeto e propriedade (ha){% endblock %}

{% block wizardBody %}
<form id="pnForm">
  <div class="container" width="60%">
    <div class="row mb-3">
      <label for="propertyArea" class="col-sm-4 col-form-label">Área da Propriedade</label>
      <div class="col-sm-8">
        <input id="propertyArea" name="propertyArea" class="form-control" type="number" title="Área da Propriedade"
          placeholder="10.0 ha">
      </div>
    </div>
    <div class="row mb-3">
      <label for="projectArea" class="col-sm-4 col-form-label">Área do Projeto</label>
      <div class="col-sm-8">
        <input id="projectArea" name="projectArea" class="form-control" type="number" title="Área do Projeto"
          placeholder="2.0 ha">
      </div>
    </div>
  </div>

  <!-- <input type="submit" value="Confirmar" /> -->
</form>
{% endblock wizardBody %}

{% block wizardConfig %}
<script>

let sAction = '/callback/rsp-areas';
  const sendData = () => { // mgd 2023.11.13
    let sParams = '?';
    for (const [key, value] of new FormData(wzdControl.ge('pnForm'))) {
      sParams += `${key}=${value}&`;
    }
    const fSuccess = (sRsp) => {
      if (sRsp.toUpperCase() == 'OK') {
        window.location = wzdControl.nextPageHref
      } else {
        wzdControl.messageError(sRsp);
      }
    }
    wzdControl.fetchObject(sAction + sParams.slice(0, -1), fSuccess, 'Erro nas medidas fornecidas.', null, { type: 'text' });
    return false;
  }

  wzdControl.initPage({
    mode: wzdControl.mode.CUSTOM,
    nextPage: 'rsp-goal.html',
    onNext: () => { sendData(); return false; },
    help: `callback/help?id=${location.pathname.substring(location.pathname.lastIndexOf("/") + 1).replace('.html', '')}`
  });


</script>
{% endblock %}

{# eof #}