<!--

=========================================================
* Pixel Free Bootstrap 5 UI Kit
=========================================================

* Product Page: https://themesberg.com/product/ui-kit/pixel-free-bootstrap-5-ui-kit
* Copyright 2021 Themesberg (https://www.themesberg.com)

* Coded by https://themesberg.com

=========================================================

* The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software. Contact us if you want to remove it.

-->

<!DOCTYPE html>
<html lang="en" style="height: 100vh">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

    <!-- Primary Meta Tags -->
    <title>Rural Legal</title>

    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />
    <meta name="title" content="Pixel Bootstrap 5 - About company" />
    <meta name="author" content="Themesberg" />
    <meta
      name="description"
      content="Open source and free Bootstrap 5 UI Kit featuring 80 UI components, 5 example pages, and a Gulp and Sass workflow."
    />
    <link
      rel="canonical"
      href="https://appseed.us/apps/flask-apps/flask-pixel-bootstrap-uikit"
    />

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website" />
    <meta
      property="og:url"
      content="https://demo.themesberg.com/pixel-bootstrap-5-ui-kit"
    />
    <meta property="og:title" content="Pixel Bootstrap 5 - About company" />
    <meta
      property="og:description"
      content="Open source and free Bootstrap 5 UI Kit featuring 80 UI components, 5 example pages, and a Gulp and Sass workflow."
    />
    <meta
      property="og:image"
      content="https://themesberg.s3.us-east-2.amazonaws.com/public/products/pixel-lite/pixel-lite-preview.jpg"
    />

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image" />
    <meta
      property="twitter:url"
      content="https://demo.themesberg.com/pixel-bootstrap-5-ui-kit"
    />
    <meta
      property="twitter:title"
      content="Pixel Bootstrap 5 - About company"
    />
    <meta
      property="twitter:description"
      content="Open source and free Bootstrap 5 UI Kit featuring 80 UI components, 5 example pages, and a Gulp and Sass workflow."
    />
    <meta
      property="twitter:image"
      content="https://themesberg.s3.us-east-2.amazonaws.com/public/products/pixel-lite/pixel-lite-preview.jpg"
    />

    <!-- Favicon -->
    <link rel="icon" type="image/png" sizes="32x32" href="../../static/assets/img/favicon/unnamed.png">

    <!-- Fontawesome -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css"
      integrity="sha512-MV7K8+y+gLIBoVD59lQIYicR65iaqukzvf/nwasF0nqhPay5w/9lJmVM2hMDcnK1OnMGCdVK+iQrJ7lzPJQd1w=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />

    <!-- Pixel CSS -->
    <link
      type="text/css"
      href="/static/assets/css/pixel.css"
      rel="stylesheet"
    />

    <!-- Specific Page JS goes HERE  -->
    {% block stylesheets %}{% endblock stylesheets %}
  </head>
  <body
    style="
      background: url(../../static/assets/img/pages/1440_Tree-tops.jpg);

      margin: 0;
    "
  >
    {% include 'includes/navigation.html' %} {% block content %}
    <div
      style="
        width: 100vw;
        height: 100vh;
        display: flex;
        flex-direction: row;
        justify-content: center;
        align-items: center;
 
      "
    >
      <div
        style="
          width: 60%;
          background: #fff;
          text-align: center;
          padding: 15px;
        "
      >
        <h3>Localização</h3>
        <hr />
        <b>Informe sua localização:</b>
        <section>
          <div>
            <select style="width: 100%; padding: 6px" id="municipio" name="municipio-select" onchange="callback()">
              <option hidden selected>(Selecione o Municipio)</option>
                   {% for key, value in municipios.items() %}
                        <option value="{{ key }}">{{ value }}</option>
                   {%  endfor %}
            </select>
            <select style="width: 100%; padding: 6px" id="fito_ecologica" name="fitoEcologica-select" onchange="callback()">
              <option value="-1" selected>(Selecione a Região Fitoecologica)</option>
                   {% for key, value in fito_municipios.items() %}
                        <option value="{{ key }}">{{ value }}</option>
                   {%  endfor %}
            </select>
            <input type="text" style="width: 100%; padding: 6px" id="lat_long" name="latlong-text" value="(Digite a latitude longitude)"></input>
            <input type="text" style="width: 100%; padding: 6px" id="CAR" name="CAR-text" value="(Digite o CAR)"></input>
          </div>
        </section>
        <span style="display: flex; justify-content: center; gap: 40px; margin: 20px;">
          <i class="fa-solid fa-pen-to-square"></i>
          <i class="fa-solid fa-map-location-dot"></i>
          <i class="fa-solid fa-location-crosshairs"></i>
        </span>
        <div>
          <div id="map" class="chart" style="height: 400px"></div>
        </div>
        <button type="submit" style="border: none; border-radius: 10px; width:30%; height: 60px; background-color: #29874a; padding: 5px 10px; color: white;">
          Ok
        </button>
      </div>
    </div>

    {% endblock content %} {% include 'includes/scripts.html' %}
    {% block javascripts %}
    <script>
            async function callback() {
                let municipio = document.getElementById('municipio').value;
                let fito = document.getElementById('fito_ecologica').value;
                let latlong = document.getElementById('lat_long').value;
                let CAR = document.getElementById('CAR').value;
                if (latlong.startsWith('('))
                  latlong = ''
                if (CAR.startsWith('('))
                  CAR = ''
                let response = await fetch(
                    `/callback/getMunicipioFito?&idMunicipio=${municipio}&idFito=${fito}&latlong=${latlong}&CAR=${CAR}`);
                if (response.ok) {
                    let mapJson = await response.json();
                    if (response.ok) {
                      let newHTML=''
                      for (const [key, value] of Object.entries(JSON.parse(mapJson['FitoMunicipio']))) {
                        newHTML = newHTML + `<option value='${key}'>${value}</option>`
                      }
                      document.getElementById('fito_ecologica').setHTML(newHTML);
                      Plotly.react('map', JSON.parse(mapJson['Map']), {});
                    } else {
                        alert("HTTP-Error: " + response.status + "on getInfo");
                    }
                } else {
                    alert("HTTP-Error: " + response.status + "on getState");
                }
        }
    </script>
<!--    <script>callback();</script>-->
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    {% endblock javascripts %}
  </body>
</html>
