<!--

=========================================================
* Pixel Free Bootstrap 5 UI Kit
=========================================================

* Product Page: https://themesberg.com/product/ui-kit/pixel-free-bootstrap-5-ui-kit
* Copyright 2021 Themesberg (https://www.themesberg.com)

* Coded by https://themesberg.com

=========================================================

* The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software. Contact us if you want to remove it.

-->

<!DOCTYPE html>
<html lang="en" style="height: 100vh">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

    <!-- Primary Meta Tags -->
    <title>Rural Legal</title>

    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />
    <meta name="title" content="Pixel Bootstrap 5 - About company" />
    <meta name="author" content="Themesberg" />
    <meta
      name="description"
      content="Open source and free Bootstrap 5 UI Kit featuring 80 UI components, 5 example pages, and a Gulp and Sass workflow."
    />
    <link
      rel="canonical"
      href="https://appseed.us/apps/flask-apps/flask-pixel-bootstrap-uikit"
    />

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website" />
    <meta
      property="og:url"
      content="https://demo.themesberg.com/pixel-bootstrap-5-ui-kit"
    />
    <meta property="og:title" content="Pixel Bootstrap 5 - About company" />
    <meta
      property="og:description"
      content="Open source and free Bootstrap 5 UI Kit featuring 80 UI components, 5 example pages, and a Gulp and Sass workflow."
    />
    <meta
      property="og:image"
      content="https://themesberg.s3.us-east-2.amazonaws.com/public/products/pixel-lite/pixel-lite-preview.jpg"
    />

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image" />
    <meta
      property="twitter:url"
      content="https://demo.themesberg.com/pixel-bootstrap-5-ui-kit"
    />
    <meta
      property="twitter:title"
      content="Pixel Bootstrap 5 - About company"
    />
    <meta
      property="twitter:description"
      content="Open source and free Bootstrap 5 UI Kit featuring 80 UI components, 5 example pages, and a Gulp and Sass workflow."
    />
    <meta
      property="twitter:image"
      content="https://themesberg.s3.us-east-2.amazonaws.com/public/products/pixel-lite/pixel-lite-preview.jpg"
    />

    <!-- Favicon -->
    <link
      rel="icon"
      type="image/png"
      sizes="32x32"
      href="../../static/assets/img/favicon/unnamed.png"
    />

    <!-- Fontawesome -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css"
      integrity="sha512-MV7K8+y+gLIBoVD59lQIYicR65iaqukzvf/nwasF0nqhPay5w/9lJmVM2hMDcnK1OnMGCdVK+iQrJ7lzPJQd1w=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />

    <!-- Pixel CSS -->
    <link
      type="text/css"
      href="/static/assets/css/pixel.css"
      rel="stylesheet"
    />

    <!-- Specific Page JS goes HERE  -->
    {% block stylesheets %}{% endblock stylesheets %}
  </head>
  <style>
    .containerMap {
      margin-top: 10%;
    }

    @media screen and (max-width: 980px) {
      .containerMap {
        margin-top: 30%;
      }
    }
  </style>
  <body
    style="
      background: url(../../static/assets/img/pages/1440_Tree-tops.jpg);

      margin: 0;
    "
  >
    <div style="width: 100vw; height: 100vh">
      <div
        class="containerMap"
        style="
          width: 60%;
          background: #fff;
          padding: 15px;
          display: flex;
          justify-content: center;
          align-items: center;
          text-align: center;
          margin: 0 auto;
          border-radius: 15px;
          flex-direction: column;
          margin-top: 10%;
        "
      >
        <div class="accordion" id="accordionName" style="width: 100%">
          <div class="accordion-item">
            <h2 class="accordion-header" id="headingTwo">
              <button
                class="accordion-button collapsed"
                type="button"
                data-bs-toggle="collapse"
                data-bs-target="#collapseTwo"
                aria-expanded="false"
                aria-controls="collapseTwo"
              >
                Informe o nome e a área do projeto em ha:
              </button>
            </h2>
            <div
              id="collapseTwo"
              class="accordion-collapse collapse"
              aria-labelledby="headingTwo"
              data-bs-parent="#accordionName"
            >
              <div class="accordion-body">
                <form style="display: flex; width: 100%">
                  <label style="font-size: 20px">Nome do projeto:</label>
                  <input
                    type="text"
                    name="projectName"
                    id="projectName"
                    style="
                    margin-left: 10px;
                      padding: 3px;
                      border-radius: 15px;
                      width: 50%;
                      border: 1px solid black;
                    "
                  />
                   <label style="font-size: 20px">Área do projeto:</label>
                  <input
                    type="text"
                    name="projectArea"
                    id="projectArea"
                    style="
                    margin-left: 10px;
                      padding: 3px;
                      border-radius: 15px;
                      width: 50%;
                      border: 1px solid black;
                    "
                  />
                </form>
              </div>
            </div>
          </div>
        </div>

       
        <div class="accordion" id="accordionLocation" style="width: 100%">
          <div class="accordion-item">
            <h2 class="accordion-header" id="headingOne">
              <button
                class="accordion-button"
                type="button"
                data-bs-toggle="collapse"
                data-bs-target="#collapseOne"
                aria-expanded="true"
                aria-controls="collapseOne"
              >
                Escolha como informar sua localização:
              </button>
            </h2>
            <div
              id="collapseOne"
              class="accordion-collapse collapse"
              aria-labelledby="headingOne"
              data-bs-parent="#accordionLocation"
            >
              <div class="accordion-body">
                <div class="d-grid">
                  <button
                    type="button"
                    class="btn btn-primary mb-3"
                    data-bs-toggle="modal"
                    data-bs-target="#modalMunicipio"
                  >
                    Municipio e Regioão Fitoecológica
                  </button>
                </div>
                <div
                  class="modal fade"
                  id="modalMunicipio"
                  tabindex="-1"
                  role="dialog"
                  aria-labelledby="modalMunicipio"
                  aria-hidden="true"
                >
                  <div
                    class="modal-dialog modal-dialog-centered"
                    role="document"
                  >
                    <div class="modal-content">
                      <div class="modal-header">
                        <h2 class="h6 modal-title">Informe sua localização:</h2>
                        <button
                          type="button"
                          class="btn-close"
                          data-bs-dismiss="modal"
                          aria-label="Close"
                        ></button>
                      </div>
                      <div class="modal-body">
                        <select
                          style="width: 100%; padding: 6px"
                          id="municipio"
                          name="municipio-select"
                          onchange="callback()"
                        >
                          <option hidden selected>
                            (Selecione o Municipio)
                          </option>
                          {% for key, value in municipios.items() %}
                          <option value="{{ key }}">{{ value }}</option>
                          {% endfor %}
                        </select>
                        <select
                          style="width: 100%; padding: 6px"
                          id="fito_ecologica"
                          name="fitoEcologica-select"
                          onchange="callback()"
                        >
                          <option value="-1" selected>
                            (Selecione a Região Fitoecologica)
                          </option>
                          {% for key, value in fito_municipios.items() %}
                          <option value="{{ key }}">{{ value }}</option>
                          {% endfor %}
                        </select>
                      </div>
                      <div class="modal-footer">
                        <button type="button" class="btn btn-secondary">
                          Ok
                        </button>
                        <button
                          type="button"
                          class="btn btn-link ms-auto"
                          data-bs-dismiss="modal"
                        >
                          Close
                        </button>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="d-grid">
                  <button
                    type="button"
                    class="btn btn-primary mb-3"
                    data-bs-toggle="modal"
                    data-bs-target="#modalLatLong"
                  >
                    Latitude e Longitude
                  </button>
                </div>
                <div
                  class="modal fade"
                  id="modalLatLong"
                  tabindex="-1"
                  role="dialog"
                  aria-labelledby="modalLatLong"
                  aria-hidden="true"
                >
                  <div
                    class="modal-dialog modal-dialog-centered"
                    role="document"
                  >
                    <div class="modal-content">
                      <div class="modal-header">
                        <h2 class="h6 modal-title">Informe sua localização:</h2>
                        <button
                          type="button"
                          class="btn-close"
                          data-bs-dismiss="modal"
                          aria-label="Close"
                        ></button>
                      </div>
                      <div class="modal-body">
                        <input
                          type="text"
                          style="width: 100%; padding: 6px"
                          id="lat_long"
                          name="latlong-text"
                          placeholder="Digite a latitude e longitude:"
                        />
                      </div>
                      <div class="modal-footer">
                        <button type="button" class="btn btn-secondary">
                          Ok
                        </button>
                        <button
                          type="button"
                          class="btn btn-link ms-auto"
                          data-bs-dismiss="modal"
                        >
                          Close
                        </button>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="d-grid">
                  <button
                    type="button"
                    class="btn btn-primary mb-3"
                    data-bs-toggle="modal"
                    data-bs-target="#modalCar"
                  >
                    CAR
                  </button>
                </div>
                <div
                  class="modal fade"
                  id="modalCar"
                  tabindex="-1"
                  role="dialog"
                  aria-labelledby="modalCar"
                  aria-hidden="true"
                >
                  <div
                    class="modal-dialog modal-dialog-centered"
                    role="document"
                  >
                    <div class="modal-content">
                      <div class="modal-header">
                        <h2 class="h6 modal-title">Informe sua localização:</h2>
                        <button
                          type="button"
                          class="btn-close"
                          data-bs-dismiss="modal"
                          aria-label="Close"
                        ></button>
                      </div>
                      <div class="modal-body">
                        <input
                          type="text"
                          style="width: 100%; padding: 6px"
                          id="CAR"
                          name="CAR-text"
                          value="(Digite o CAR)"
                        />
                        <input
                          type="text"
                          style="width: 100%; padding: 6px"
                          id="area"
                          name="area-text"
                          value="(Digite a Área em ha)"
                        />
                      </div>
                      <div class="modal-footer">
                        <button type="button" class="btn btn-secondary">
                          Ok
                        </button>
                        <button
                          type="button"
                          class="btn btn-link ms-auto"
                          data-bs-dismiss="modal"
                        >
                          Close
                        </button>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div id="map" class="chart" style="max-height: 200px"></div>
        <button
          type="submit"
          style="
            border: none;
            border-radius: 10px;
            width: 30%;
            height: 60px;
            background-color: #29874a;
            padding: 5px 10px;
            color: white;
            margin-top: 15px;
          "
        >
          Ok
        </button>
      </div>

      {% include 'includes/navigation.html' %} {% block content %} {% endblock
      content %} {% include 'includes/scripts.html' %} {% block javascripts %}
      <script>
        async function callback() {
          let municipio = document.getElementById("municipio").value;
          let fito = document.getElementById("fito_ecologica").value;
          let latlong = document.getElementById("lat_long").value;
          let CAR = document.getElementById("CAR").value;
          if (latlong.startsWith("(")) latlong = "";
          if (CAR.startsWith("(")) CAR = "";
          let response = await fetch(
            `/callback/getMunicipioFito?&idMunicipio=${municipio}&idFito=${fito}&latlong=${latlong}&CAR=${CAR}`
          );
          if (response.ok) {
            let mapJson = await response.json();
            if (response.ok) {
              let newHTML = "";
              for (const [key, value] of Object.entries(
                JSON.parse(mapJson["FitoMunicipio"])
              )) {
                newHTML = newHTML + `<option value='${key}'>${value}</option>`;
              }
              document.getElementById("fito_ecologica").setHTML(newHTML);
              document.getElementById("area").value = mapJson["Area"];
              Plotly.react("map", JSON.parse(mapJson["Map"]), {});
            } else {
              alert("HTTP-Error: " + response.status + "on callback()");
            }
          } else {
            alert("HTTP-Error: " + response.status + "on callback()");
          }
        }
      </script>
      <!--    <script>callback();</script>-->
      <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
      {% endblock javascripts %}
    </div>
  </body>
</html>
